#!/bin/bash
#
#                           Ezanvakti YAD Arayüz 2 Bileşeni 1.0
#
#

. @libdir@/@AD@/temel_islevler.bash
. @libdir@/@AD@/arayuz_temel.bash

# Yalnıca bir arayüz2 örneği çalışması için
# pid denetimi yapılsın.
arayuz_pid_denetle 2

bilesen_yukle conky
bilesen_yukle siradaki

if [[ -f ${EZANVAKTI_DIZINI}/ezanvakti.css ]]
then
    EZV_CSS="${EZANVAKTI_DIZINI}/ezanvakti.css"
else
    EZV_CSS="${VERI_DIZINI}/veriler/ezanvakti.css"
fi

while true
do
  date '+%d.%m.%Y   %H:%M:%S'
  echo "${ILCE}"
  siradaki_vakit conky_siradaki
  ypid="$(pgrep -lf "yad --plug=$$" | gawk '{ print $1 }')"
  [ -z "$ypid" ] && break
  sleep 1
done | yad --plug="$$" --tabnum=1 --form --cycle-read --columns=1 \
  --field="Şu an: :RO" --field="Konum: :RO" --field="Sıradaki: :RO" --gtkrc="${EZV_CSS}" &

while true
do
  ezv_conky
  ypid="$(pgrep -lf "yad --plug=$$" | gawk '{ print $1 }')"
  [ -z "$ypid" ] && break
  sleep 59
done | yad --plug="$$" --tabnum=2 --center --form --cycle-read --columns=2 \
  --field=" :RO" --field=" :RO" --field=" :RO" --field=" :RO" --field=" :RO" \
  --field=" :RO" --no-buttons --gtkrc="${EZV_CSS}" &

yad --center --title="${AD^} Arayüz 2" --width=380 --height=295 --paned --key="$$" \
  --orient=vert --window-icon="${AD}" --button="yad-close" --fixed --gtkrc="${EZV_CSS}"

# vim: set ft=sh ts=2 sw=2 et:
